(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{817:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return St}));var a,o,s=i(0),n=i(29),c=i.n(n),l=i(1),d=i.n(l),r=i(13),u=i(2),h=i.n(u),b=i(752),g=i(751),p=i(32),f=i(67),m=i(114),j=i(35),O=i(15),v=i.n(O),_=i(4),M=i(129),w=i(16),C=i(7),N=i(170),P=i(757),x=i(143),k=i(72);const y=Object(_.f)({openReport:{id:"report_notification.open",defaultMessage:"Open report"},other:{id:"report_notification.categories.other",defaultMessage:"Other"},spam:{id:"report_notification.categories.spam",defaultMessage:"Spam"},violation:{id:"report_notification.categories.violation",defaultMessage:"Rule violation"}});let I=Object(_.g)(((o=class extends w.a{render(){const{intl:t,hidden:e,report:i,account:a}=this.props;return i?e?Object(s.a)(l.Fragment,{},void 0,i.get("id")):Object(s.a)("div",{className:"notification__report"},void 0,Object(s.a)("div",{className:"notification__report__avatar"},void 0,Object(s.a)(x.a,{account:i.get("target_account"),friend:a})),Object(s.a)("div",{className:"notification__report__details"},void 0,Object(s.a)("div",{},void 0,Object(s.a)(k.default,{timestamp:i.get("created_at"),short:!1})," Â· ",Object(s.a)(_.b,{id:"report_notification.attached_statuses",defaultMessage:"{count, plural, one {{count} post} other {{count} posts}} attached",values:{count:i.get("status_ids").size}}),Object(s.a)("br",{}),Object(s.a)("strong",{},void 0,t.formatMessage(y[i.get("category")]))),Object(s.a)("div",{className:"notification__report__actions"},void 0,Object(s.a)("a",{href:"/admin/reports/"+i.get("id"),className:"button",target:"_blank",rel:"noopener noreferrer"},void 0,t.formatMessage(y.openReport))))):null}}).propTypes={account:v.a.map.isRequired,report:v.a.map.isRequired,hidden:h.a.bool,intl:h.a.object.isRequired},a=o))||a;var S,R,q=i(34),W=i(50),H=i(86),F=i(18);const T=Object(_.f)({authorize:{id:"follow_request.authorize",defaultMessage:"Authorize"},reject:{id:"follow_request.reject",defaultMessage:"Reject"}});let D=Object(_.g)(((R=class extends w.a{render(){const{intl:t,hidden:e,account:i,onAuthorize:a,onReject:o}=this.props;return i?e?Object(s.a)(l.Fragment,{},void 0,i.get("display_name"),i.get("username")):Object(s.a)("div",{className:"account"},void 0,Object(s.a)("div",{className:"account__wrapper"},void 0,Object(s.a)(H.a,{className:"account__display-name",title:i.get("acct"),to:"/@"+i.get("acct")},i.get("id"),Object(s.a)("div",{className:"account__avatar-wrapper"},void 0,Object(s.a)(q.a,{account:i,size:36})),Object(s.a)(W.a,{account:i})),Object(s.a)("div",{className:"account__relationship"},void 0,Object(s.a)(F.a,{title:t.formatMessage(T.authorize),icon:"check",onClick:a}),Object(s.a)(F.a,{title:t.formatMessage(T.reject),icon:"times",onClick:o})))):Object(s.a)("div",{})}}).propTypes={account:v.a.map.isRequired,onAuthorize:h.a.func.isRequired,onReject:h.a.func.isRequired,intl:h.a.object.isRequired},S=R))||S;var U=i(10);var A,B,L=Object(r.connect)((()=>{const t=Object(j.d)();return(e,i)=>({account:t(e,i.id)})}),((t,e)=>{let{id:i}=e;return{onAuthorize(){t(Object(U.I)(i))},onReject(){t(Object(U.W)(i))}}}))(D),z=i(14),K=i(9),E=i.n(K);const Y=Object(_.f)({favourite:{id:"notification.favourite",defaultMessage:"{name} favourited your status"},follow:{id:"notification.follow",defaultMessage:"{name} followed you"},ownPoll:{id:"notification.own_poll",defaultMessage:"Your poll has ended"},poll:{id:"notification.poll",defaultMessage:"A poll you have voted in has ended"},reblog:{id:"notification.reblog",defaultMessage:"{name} boosted your status"},status:{id:"notification.status",defaultMessage:"{name} just posted"},update:{id:"notification.update",defaultMessage:"{name} edited a post"},adminSignUp:{id:"notification.admin.sign_up",defaultMessage:"{name} signed up"},adminReport:{id:"notification.admin.report",defaultMessage:"{name} reported {target}"}}),G=(t,e,i)=>{const a=[e];return a.push(t.formatDate(i,{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})),a.join(", ")};let $=Object(_.g)(((B=class extends w.a{constructor(){super(...arguments),this.handleMoveUp=()=>{const{notification:t,onMoveUp:e}=this.props;e(t.get("id"))},this.handleMoveDown=()=>{const{notification:t,onMoveDown:e}=this.props;e(t.get("id"))},this.handleOpen=()=>{const{notification:t}=this.props;t.get("status")?this.context.router.history.push(`/@${t.getIn(["status","account","acct"])}/${t.get("status")}`):this.handleOpenProfile()},this.handleOpenProfile=()=>{const{notification:t}=this.props;this.context.router.history.push("/@"+t.getIn(["account","acct"]))},this.handleMention=t=>{t.preventDefault();const{notification:e,onMention:i}=this.props;i(e.get("account"),this.context.router.history)},this.handleHotkeyFavourite=()=>{const{status:t}=this.props;t&&this.props.onFavourite(t)},this.handleHotkeyBoost=t=>{const{status:e}=this.props;e&&this.props.onReblog(e,t)},this.handleHotkeyToggleHidden=()=>{const{status:t}=this.props;t&&this.props.onToggleHidden(t)}}getHandlers(){return{reply:this.handleMention,favourite:this.handleHotkeyFavourite,boost:this.handleHotkeyBoost,mention:this.handleMention,open:this.handleOpen,openProfile:this.handleOpenProfile,moveUp:this.handleMoveUp,moveDown:this.handleMoveDown,toggleHidden:this.handleHotkeyToggleHidden}}renderFollow(t,e,i){const{intl:a,unread:o}=this.props;return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-follow focusable",{unread:o}),tabIndex:"0","aria-label":G(a,a.formatMessage(Y.follow,{name:e.get("acct")}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"user-plus",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.follow",defaultMessage:"{name} followed you",values:{name:i}}))),Object(s.a)(P.a,{id:e.get("id"),hidden:this.props.hidden})))}renderFollowRequest(t,e,i){const{intl:a,unread:o}=this.props;return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-follow-request focusable",{unread:o}),tabIndex:"0","aria-label":G(a,a.formatMessage({id:"notification.follow_request",defaultMessage:"{name} has requested to follow you"},{name:e.get("acct")}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"user",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.follow_request",defaultMessage:"{name} has requested to follow you",values:{name:i}}))),Object(s.a)(L,{id:e.get("id"),withNote:!1,hidden:this.props.hidden})))}renderMention(t){return Object(s.a)(N.a,{id:t.get("status"),withDismiss:!0,hidden:this.props.hidden,onMoveDown:this.handleMoveDown,onMoveUp:this.handleMoveUp,contextType:"notifications",getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth,unread:this.props.unread})}renderFavourite(t,e){const{intl:i,unread:a}=this.props;return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-favourite focusable",{unread:a}),tabIndex:"0","aria-label":G(i,i.formatMessage(Y.favourite,{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"star",className:"star-icon",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.favourite",defaultMessage:"{name} favourited your status",values:{name:e}}))),Object(s.a)(N.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:!!this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))}renderReblog(t,e){const{intl:i,unread:a}=this.props;return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-reblog focusable",{unread:a}),tabIndex:"0","aria-label":G(i,i.formatMessage(Y.reblog,{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"retweet",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.reblog",defaultMessage:"{name} boosted your status",values:{name:e}}))),Object(s.a)(N.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))}renderStatus(t,e){const{intl:i,unread:a}=this.props;return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-status focusable",{unread:a}),tabIndex:"0","aria-label":G(i,i.formatMessage(Y.status,{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"home",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.status",defaultMessage:"{name} just posted",values:{name:e}}))),Object(s.a)(N.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))}renderUpdate(t,e){const{intl:i,unread:a}=this.props;return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-update focusable",{unread:a}),tabIndex:"0","aria-label":G(i,i.formatMessage(Y.update,{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"pencil",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.update",defaultMessage:"{name} edited a post",values:{name:e}}))),Object(s.a)(N.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))}renderPoll(t,e){const{intl:i,unread:a}=this.props,o=C.n===e.get("id"),n=o?i.formatMessage(Y.ownPoll):i.formatMessage(Y.poll);return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-poll focusable",{unread:a}),tabIndex:"0","aria-label":G(i,n,t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"tasks",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,o?Object(s.a)(_.b,{id:"notification.own_poll",defaultMessage:"Your poll has ended"}):Object(s.a)(_.b,{id:"notification.poll",defaultMessage:"A poll you have voted in has ended"}))),Object(s.a)(N.a,{id:t.get("status"),account:e,muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))}renderAdminSignUp(t,e,i){const{intl:a,unread:o}=this.props;return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-admin-sign-up focusable",{unread:o}),tabIndex:"0","aria-label":G(a,a.formatMessage(Y.adminSignUp,{name:e.get("acct")}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"user-plus",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.admin.sign_up",defaultMessage:"{name} signed up",values:{name:i}}))),Object(s.a)(P.a,{id:e.get("id"),hidden:this.props.hidden})))}renderAdminReport(t,e,i){const{intl:a,unread:o,report:n}=this.props;if(!n)return null;const c=n.get("target_account"),l={__html:c.get("display_name_html")},d=Object(s.a)("bdi",{},void 0,Object(s.a)(H.a,{className:"notification__display-name",title:c.get("acct"),to:"/@"+c.get("acct"),dangerouslySetInnerHTML:l}));return Object(s.a)(M.HotKeys,{handlers:this.getHandlers()},void 0,Object(s.a)("div",{className:E()("notification notification-admin-report focusable",{unread:o}),tabIndex:"0","aria-label":G(a,a.formatMessage(Y.adminReport,{name:e.get("acct"),target:t.getIn(["report","target_account","acct"])}),t.get("created_at"))},void 0,Object(s.a)("div",{className:"notification__message"},void 0,Object(s.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(s.a)(z.a,{id:"flag",fixedWidth:!0})),Object(s.a)("span",{title:t.get("created_at")},void 0,Object(s.a)(_.b,{id:"notification.admin.report",defaultMessage:"{name} reported {target}",values:{name:i,target:d}}))),Object(s.a)(I,{account:e,report:t.get("report"),hidden:this.props.hidden})))}render(){const{notification:t}=this.props,e=t.get("account"),i={__html:e.get("display_name_html")},a=Object(s.a)("bdi",{},void 0,Object(s.a)(H.a,{className:"notification__display-name",href:"/@"+e.get("acct"),title:e.get("acct"),to:"/@"+e.get("acct"),dangerouslySetInnerHTML:i}));switch(t.get("type")){case"follow":return this.renderFollow(t,e,a);case"follow_request":return this.renderFollowRequest(t,e,a);case"mention":return this.renderMention(t);case"favourite":return this.renderFavourite(t,a);case"reblog":return this.renderReblog(t,a);case"status":return this.renderStatus(t,a);case"update":return this.renderUpdate(t,a);case"poll":return this.renderPoll(t,e);case"admin.sign_up":return this.renderAdminSignUp(t,e,a);case"admin.report":return this.renderAdminReport(t,e,a)}return null}}).contextTypes={router:h.a.object},B.propTypes={notification:v.a.map.isRequired,hidden:h.a.bool,onMoveUp:h.a.func.isRequired,onMoveDown:h.a.func.isRequired,onMention:h.a.func.isRequired,onFavourite:h.a.func.isRequired,onReblog:h.a.func.isRequired,onToggleHidden:h.a.func.isRequired,status:v.a.map,intl:h.a.object.isRequired,getScrollPosition:h.a.func,updateScrollBottom:h.a.func,cacheMediaWidth:h.a.func,cachedMediaWidth:h.a.number,unread:h.a.bool},A=B))||A;var J=i(73),V=i(11),Q=i(23),X=i(25);var Z=Object(r.connect)((()=>{const t=Object(j.e)(),e=Object(j.h)(),i=Object(j.g)();return(a,o)=>{const s=t(a,o.notification,o.accountId);return{notification:s,status:s.get("status")?e(a,{id:s.get("status")}):null,report:s.get("report")?i(a,s.get("report"),s.getIn(["report","target_account","id"])):null}}}),(t=>({onMention:(e,i)=>{t(Object(V.pb)(e,i))},onModalReblog(e,i){t(Object(Q.t)(e,i))},onReblog(e,i){e.get("reblogged")?t(Object(Q.x)(e)):i.shiftKey||!C.b?this.onModalReblog(e):t(Object(J.d)({status:e,onReblog:this.onModalReblog}))},onFavourite(e){e.get("favourited")?t(Object(Q.v)(e)):t(Object(Q.p)(e))},onToggleHidden(e){e.get("hidden")?t(Object(X.q)(e.get("id"))):t(Object(X.o)(e.get("id")))}})))($);class tt extends d.a.PureComponent{render(){return Object(s.a)("button",{className:"text-btn column-header__setting-btn",tabIndex:"0",onClick:this.props.onClick},void 0,Object(s.a)(z.a,{id:"eraser"})," ",Object(s.a)(_.b,{id:"notifications.clear",defaultMessage:"Clear notifications"}))}}class et extends d.a.PureComponent{render(){return Object(s.a)("button",{className:"text-btn column-header__permission-btn",tabIndex:"0",onClick:this.props.onClick},void 0,Object(s.a)(_.b,{id:"notifications.grant_permission",defaultMessage:"Grant permission."}))}}var it=i(762),at=i(76);class ot extends d.a.PureComponent{constructor(){super(...arguments),this.onPushChange=(t,e)=>{this.props.onChange(["push",...t],e)}}render(){const{settings:t,pushSettings:e,onChange:i,onClear:a,alertsEnabled:o,browserSupport:n,browserPermission:c,onRequestNotificationPermission:l}=this.props,d=Object(s.a)(_.b,{id:"notifications.column_settings.unread_notifications.highlight",defaultMessage:"Highlight unread notifications"}),r=Object(s.a)(_.b,{id:"notifications.column_settings.filter_bar.show_bar",defaultMessage:"Show filter bar"}),u=Object(s.a)(_.b,{id:"notifications.column_settings.filter_bar.advanced",defaultMessage:"Display all categories"}),h=Object(s.a)(_.b,{id:"notifications.column_settings.alert",defaultMessage:"Desktop notifications"}),b=Object(s.a)(_.b,{id:"notifications.column_settings.show",defaultMessage:"Show in column"}),g=Object(s.a)(_.b,{id:"notifications.column_settings.sound",defaultMessage:"Play sound"}),p=e.get("browserSupport")&&e.get("isSubscribed"),f=p&&Object(s.a)(_.b,{id:"notifications.column_settings.push",defaultMessage:"Push notifications"});return Object(s.a)("div",{},void 0,o&&n&&"denied"===c&&Object(s.a)("div",{className:"column-settings__row column-settings__row--with-margin"},void 0,Object(s.a)("span",{className:"warning-hint"},void 0,Object(s.a)(_.b,{id:"notifications.permission_denied",defaultMessage:"Desktop notifications are unavailable due to previously denied browser permissions request"}))),o&&n&&"default"===c&&Object(s.a)("div",{className:"column-settings__row column-settings__row--with-margin"},void 0,Object(s.a)("span",{className:"warning-hint"},void 0,Object(s.a)(_.b,{id:"notifications.permission_required",defaultMessage:"Desktop notifications are unavailable because the required permission has not been granted."})," ",Object(s.a)(et,{onClick:l}))),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(tt,{onClick:a})),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-unread-markers"},void 0,Object(s.a)("span",{id:"notifications-unread-markers",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.unread_notifications.category",defaultMessage:"Unread notifications"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{id:"unread-notification-markers",prefix:"notifications",settings:t,settingPath:["showUnread"],onChange:i,label:d}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-filter-bar"},void 0,Object(s.a)("span",{id:"notifications-filter-bar",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.filter_bar.category",defaultMessage:"Quick filter bar"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{id:"show-filter-bar",prefix:"notifications",settings:t,settingPath:["quickFilter","show"],onChange:i,label:r}),Object(s.a)(it.a,{id:"show-filter-bar",prefix:"notifications",settings:t,settingPath:["quickFilter","advanced"],onChange:i,label:u}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-follow"},void 0,Object(s.a)("span",{id:"notifications-follow",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.follow",defaultMessage:"New followers:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","follow"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","follow"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","follow"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","follow"],onChange:i,label:g}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-follow-request"},void 0,Object(s.a)("span",{id:"notifications-follow-request",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.follow_request",defaultMessage:"New follow requests:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","follow_request"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","follow_request"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","follow_request"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","follow_request"],onChange:i,label:g}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-favourite"},void 0,Object(s.a)("span",{id:"notifications-favourite",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.favourite",defaultMessage:"Favourites:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","favourite"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","favourite"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","favourite"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","favourite"],onChange:i,label:g}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-mention"},void 0,Object(s.a)("span",{id:"notifications-mention",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.mention",defaultMessage:"Mentions:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","mention"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","mention"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","mention"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","mention"],onChange:i,label:g}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-reblog"},void 0,Object(s.a)("span",{id:"notifications-reblog",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.reblog",defaultMessage:"Boosts:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","reblog"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","reblog"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","reblog"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","reblog"],onChange:i,label:g}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-poll"},void 0,Object(s.a)("span",{id:"notifications-poll",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.poll",defaultMessage:"Poll results:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","poll"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","poll"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","poll"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","poll"],onChange:i,label:g}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-status"},void 0,Object(s.a)("span",{id:"notifications-status",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.status",defaultMessage:"New posts:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","status"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","status"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","status"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","status"],onChange:i,label:g}))),Object(s.a)("div",{role:"group","aria-labelledby":"notifications-update"},void 0,Object(s.a)("span",{id:"notifications-update",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.update",defaultMessage:"Edits:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","update"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","update"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","update"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","update"],onChange:i,label:g}))),(this.context.identity.permissions&at.c)===at.c&&Object(s.a)("div",{role:"group","aria-labelledby":"notifications-admin-sign-up"},void 0,Object(s.a)("span",{id:"notifications-status",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.admin.sign_up",defaultMessage:"New sign-ups:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","admin.sign_up"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","admin.sign_up"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","admin.sign_up"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","admin.sign_up"],onChange:i,label:g}))),(this.context.identity.permissions&at.b)===at.b&&Object(s.a)("div",{role:"group","aria-labelledby":"notifications-admin-report"},void 0,Object(s.a)("span",{id:"notifications-status",className:"column-settings__section"},void 0,Object(s.a)(_.b,{id:"notifications.column_settings.admin.report",defaultMessage:"New reports:"})),Object(s.a)("div",{className:"column-settings__row"},void 0,Object(s.a)(it.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:t,settingPath:["alerts","admin.report"],onChange:i,label:h}),p&&Object(s.a)(it.a,{prefix:"notifications_push",settings:e,settingPath:["alerts","admin.report"],onChange:this.onPushChange,label:f}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["shows","admin.report"],onChange:i,label:b}),Object(s.a)(it.a,{prefix:"notifications",settings:t,settingPath:["sounds","admin.report"],onChange:i,label:g}))))}}ot.contextTypes={identity:h.a.object};var st=i(44),nt=i(127),ct=i(17),lt=i(37);const dt=Object(_.f)({clearMessage:{id:"notifications.clear_confirmation",defaultMessage:"Are you sure you want to permanently clear all your notifications?"},clearConfirm:{id:"notifications.clear",defaultMessage:"Clear notifications"},permissionDenied:{id:"notifications.permission_denied_alert",defaultMessage:"Desktop notifications can't be enabled, as browser permission has been denied before"}});var rt,ut=Object(_.g)(Object(r.connect)((t=>({settings:t.getIn(["settings","notifications"]),pushSettings:t.get("push_notifications"),alertsEnabled:t.getIn(["settings","notifications","alerts"]).includes(!0),browserSupport:t.getIn(["notifications","browserSupport"]),browserPermission:t.getIn(["notifications","browserPermission"])})),((t,e)=>{let{intl:i}=e;return{onChange(e,i){"push"===e[0]?i&&void 0!==window.Notification&&"granted"!==Notification.permission?t(Object(p.s)((a=>{t("granted"===a?Object(nt.changeAlerts)(e.slice(1),i):Object(lt.e)(void 0,dt.permissionDenied))}))):t(Object(nt.changeAlerts)(e.slice(1),i)):"quickFilter"===e[0]?(t(Object(st.c)(["notifications",...e],i)),t(Object(p.u)("all"))):"alerts"===e[0]&&i&&void 0!==window.Notification&&"granted"!==Notification.permission&&i&&void 0!==window.Notification&&"granted"!==Notification.permission?t(Object(p.s)((a=>{t("granted"===a?Object(st.c)(["notifications",...e],i):Object(lt.e)(void 0,dt.permissionDenied))}))):t(Object(st.c)(["notifications",...e],i))},onClear(){t(Object(ct.d)("CONFIRM",{message:i.formatMessage(dt.clearMessage),confirm:i.formatMessage(dt.clearConfirm),onConfirm:()=>t(Object(p.n)())}))},onRequestNotificationPermission(){t(Object(p.s)())}}}))(ot));const ht=Object(_.f)({mentions:{id:"notifications.filter.mentions",defaultMessage:"Mentions"},favourites:{id:"notifications.filter.favourites",defaultMessage:"Favourites"},boosts:{id:"notifications.filter.boosts",defaultMessage:"Boosts"},polls:{id:"notifications.filter.polls",defaultMessage:"Poll results"},follows:{id:"notifications.filter.follows",defaultMessage:"Follows"},statuses:{id:"notifications.filter.statuses",defaultMessage:"Updates from people you follow"}});let bt=Object(_.g)(rt=class extends d.a.PureComponent{onClick(t){return()=>this.props.selectFilter(t)}render(){const{selectedFilter:t,advancedMode:e,intl:i}=this.props;return e?Object(s.a)("div",{className:"notification__filter-bar"},void 0,Object(s.a)("button",{className:"all"===t?"active":"",onClick:this.onClick("all")},void 0,Object(s.a)(_.b,{id:"notifications.filter.all",defaultMessage:"All"})),Object(s.a)("button",{className:"mention"===t?"active":"",onClick:this.onClick("mention"),title:i.formatMessage(ht.mentions)},void 0,Object(s.a)(z.a,{id:"reply-all",fixedWidth:!0})),Object(s.a)("button",{className:"favourite"===t?"active":"",onClick:this.onClick("favourite"),title:i.formatMessage(ht.favourites)},void 0,Object(s.a)(z.a,{id:"star",fixedWidth:!0})),Object(s.a)("button",{className:"reblog"===t?"active":"",onClick:this.onClick("reblog"),title:i.formatMessage(ht.boosts)},void 0,Object(s.a)(z.a,{id:"retweet",fixedWidth:!0})),Object(s.a)("button",{className:"poll"===t?"active":"",onClick:this.onClick("poll"),title:i.formatMessage(ht.polls)},void 0,Object(s.a)(z.a,{id:"tasks",fixedWidth:!0})),Object(s.a)("button",{className:"status"===t?"active":"",onClick:this.onClick("status"),title:i.formatMessage(ht.statuses)},void 0,Object(s.a)(z.a,{id:"home",fixedWidth:!0})),Object(s.a)("button",{className:"follow"===t?"active":"",onClick:this.onClick("follow"),title:i.formatMessage(ht.follows)},void 0,Object(s.a)(z.a,{id:"user-plus",fixedWidth:!0}))):Object(s.a)("div",{className:"notification__filter-bar"},void 0,Object(s.a)("button",{className:"all"===t?"active":"",onClick:this.onClick("all")},void 0,Object(s.a)(_.b,{id:"notifications.filter.all",defaultMessage:"All"})),Object(s.a)("button",{className:"mention"===t?"active":"",onClick:this.onClick("mention")},void 0,Object(s.a)(_.b,{id:"notifications.filter.mentions",defaultMessage:"Mentions"})))}})||rt;var gt,pt=Object(r.connect)((t=>({selectedFilter:t.getIn(["settings","notifications","quickFilter","active"]),advancedMode:t.getIn(["settings","notifications","quickFilter","advanced"])})),(t=>({selectFilter(e){t(Object(p.u)(e))}})))(bt),ft=i(46),mt=i(3),jt=i(195),Ot=i(320),vt=i(26),_t=i(28);const Mt=Object(_.f)({close:{id:"lightbox.close",defaultMessage:"Close"}});let wt=Object(r.connect)()(gt=Object(_.g)(gt=class extends d.a.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.dispatch(Object(p.s)())},this.handleClose=()=>{this.props.dispatch(Object(st.c)(["notifications","dismissPermissionBanner"],!0))}}render(){const{intl:t}=this.props;return Object(s.a)("div",{className:"notifications-permission-banner"},void 0,Object(s.a)("div",{className:"notifications-permission-banner__close"},void 0,Object(s.a)(F.a,{icon:"times",onClick:this.handleClose,title:t.formatMessage(Mt.close)})),Object(s.a)("h2",{},void 0,Object(s.a)(_.b,{id:"notifications_permission_banner.title",defaultMessage:"Never miss a thing"})),Object(s.a)("p",{},void 0,Object(s.a)(_.b,{id:"notifications_permission_banner.how_to_control",defaultMessage:"To receive notifications when Mastodon isn't open, enable desktop notifications. You can control precisely which types of interactions generate desktop notifications through the {icon} button above once they're enabled.",values:{icon:Object(s.a)(z.a,{id:"sliders"})}})),Object(s.a)(_t.a,{onClick:this.handleClick},void 0,Object(s.a)(_.b,{id:"notifications_permission_banner.enable",defaultMessage:"Enable desktop notifications"})))}})||gt)||gt;var Ct,Nt,Pt=i(777),xt=i(95);const kt=Object(_.f)({title:{id:"column.notifications",defaultMessage:"Notifications"},markAsRead:{id:"notifications.mark_as_read",defaultMessage:"Mark every notification as read"}}),yt=Object(ft.a)([t=>t.getIn(["settings","notifications","shows"])],(t=>Object(mt.List)(t.filter((t=>!t)).keys()))),It=Object(ft.a)([t=>t.getIn(["settings","notifications","quickFilter","show"]),t=>t.getIn(["settings","notifications","quickFilter","active"]),yt,t=>t.getIn(["notifications","items"])],((t,e,i,a)=>t&&"all"!==e?a.filter((t=>null===t||e===t.get("type"))):a.filterNot((t=>null!==t&&i.includes(t.get("type"))))));let St=Object(r.connect)((t=>({showFilterBar:t.getIn(["settings","notifications","quickFilter","show"]),notifications:It(t),isLoading:t.getIn(["notifications","isLoading"],0)>0,isUnread:t.getIn(["notifications","unread"])>0||t.getIn(["notifications","pendingItems"]).size>0,hasMore:t.getIn(["notifications","hasMore"]),numPending:t.getIn(["notifications","pendingItems"],Object(mt.List)()).size,lastReadId:t.getIn(["settings","notifications","showUnread"])?t.getIn(["notifications","readMarkerId"]):"0",canMarkAsRead:t.getIn(["settings","notifications","showUnread"])&&"0"!==t.getIn(["notifications","readMarkerId"])&&It(t).some((e=>null!==e&&Object(vt.a)(e.get("id"),t.getIn(["notifications","readMarkerId"]))>0)),needsNotificationPermission:t.getIn(["settings","notifications","alerts"]).includes(!0)&&t.getIn(["notifications","browserSupport"])&&"default"===t.getIn(["notifications","browserPermission"])&&!t.getIn(["settings","notifications","dismissPermissionBanner"])})))(Ct=Object(_.g)(((Nt=class extends d.a.PureComponent{constructor(){super(...arguments),this.handleLoadGap=t=>{this.props.dispatch(Object(p.o)({maxId:t}))},this.handleLoadOlder=c()((()=>{const t=this.props.notifications.last();this.props.dispatch(Object(p.o)({maxId:t&&t.get("id")}))}),300,{leading:!0}),this.handleLoadPending=()=>{this.props.dispatch(Object(p.p)())},this.handleScrollToTop=c()((()=>{this.props.dispatch(Object(p.t)(!0))}),100),this.handleScroll=c()((()=>{this.props.dispatch(Object(p.t)(!1))}),100),this.handlePin=()=>{const{columnId:t,dispatch:e}=this.props;e(t?Object(m.h)(t):Object(m.e)("NOTIFICATIONS",{}))},this.handleMove=t=>{const{columnId:e,dispatch:i}=this.props;i(Object(m.g)(e,t))},this.handleHeaderClick=()=>{this.column.scrollTop()},this.setColumnRef=t=>{this.column=t},this.handleMoveUp=t=>{const e=this.props.notifications.findIndex((e=>null!==e&&e.get("id")===t))-1;this._selectChild(e,!0)},this.handleMoveDown=t=>{const e=this.props.notifications.findIndex((e=>null!==e&&e.get("id")===t))+1;this._selectChild(e,!1)},this.handleMarkAsRead=()=>{this.props.dispatch(Object(p.q)()),this.props.dispatch(Object(f.d)({immediate:!0}))}}componentWillMount(){this.props.dispatch(Object(p.r)())}componentWillUnmount(){this.handleLoadOlder.cancel(),this.handleScrollToTop.cancel(),this.handleScroll.cancel(),this.props.dispatch(Object(p.t)(!1)),this.props.dispatch(Object(p.w)())}_selectChild(t,e){const i=this.column.node,a=i.querySelector(`article:nth-of-type(${t+1}) .focusable`);a&&(e&&i.scrollTop>a.offsetTop?a.scrollIntoView(!0):!e&&i.scrollTop+i.clientHeight<a.offsetTop+a.offsetHeight&&a.scrollIntoView(!1),a.focus())}render(){const{intl:t,notifications:e,isLoading:i,isUnread:a,columnId:o,multiColumn:n,hasMore:c,numPending:l,showFilterBar:r,lastReadId:u,canMarkAsRead:h,needsNotificationPermission:p}=this.props,f=!!o,m=Object(s.a)(_.b,{id:"empty_column.notifications",defaultMessage:"You don't have any notifications yet. When other people interact with you, you will see it here."}),{signedIn:j}=this.context.identity;let O=null;const v=j&&r?Object(s.a)(pt,{}):null;let M;O=i&&this.scrollableContent?this.scrollableContent:e.size>0||c?e.map(((t,a)=>null===t?Object(s.a)(Ot.a,{disabled:i,maxId:a>0?e.getIn([a-1,"id"]):null,onClick:this.handleLoadGap},"gap:"+e.getIn([a+1,"id"])):Object(s.a)(Z,{notification:t,accountId:t.get("account"),onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,unread:"0"!==u&&Object(vt.a)(t.get("id"),u)>0},t.get("id")))):null,this.scrollableContent=O,M=j?Object(s.a)(jt.a,{scrollKey:"notifications-"+o,trackScroll:!f,isLoading:i,showLoading:i&&0===e.size,hasMore:c,numPending:l,prepend:p&&Object(s.a)(wt,{}),alwaysPrepend:!0,emptyMessage:m,onLoadMore:this.handleLoadOlder,onLoadPending:this.handleLoadPending,onScrollToTop:this.handleScrollToTop,onScroll:this.handleScroll,bindToDocument:!n},void 0,O):Object(s.a)(Pt.a,{});let w=null;return h&&(w=Object(s.a)("button",{"aria-label":t.formatMessage(kt.markAsRead),title:t.formatMessage(kt.markAsRead),onClick:this.handleMarkAsRead,className:"column-header__button"},void 0,Object(s.a)(z.a,{id:"check"}))),d.a.createElement(b.a,{bindToDocument:!n,ref:this.setColumnRef,label:t.formatMessage(kt.title)},Object(s.a)(g.a,{icon:"bell",active:a,title:t.formatMessage(kt.title),onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:f,multiColumn:n,extraButton:w},void 0,Object(s.a)(ut,{})),v,M,Object(s.a)(xt.a,{},void 0,Object(s.a)("title",{},void 0,t.formatMessage(kt.title)),Object(s.a)("meta",{name:"robots",content:"noindex"})))}}).contextTypes={identity:h.a.object},Nt.defaultProps={trackScroll:!0},Ct=Nt))||Ct)||Ct}}]);
//# sourceMappingURL=notifications-a005ed80dee08f73bfd9.chunk.js.map