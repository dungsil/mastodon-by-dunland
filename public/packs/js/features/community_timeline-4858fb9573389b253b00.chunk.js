(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{826:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var i,o=n(0),s=n(1),c=n.n(s),a=n(13),d=n(4),l=n(2),m=n.n(l),r=n(763),u=n(752),h=n(751),p=n(19),b=n(114),g=n(762);let y=Object(d.g)(i=class extends c.a.PureComponent{render(){const{settings:e,onChange:t}=this.props;return Object(o.a)("div",{},void 0,Object(o.a)("div",{className:"column-settings__row"},void 0,Object(o.a)(g.a,{settings:e,settingPath:["other","onlyMedia"],onChange:t,label:Object(o.a)(d.b,{id:"community.column_settings.media_only",defaultMessage:"Media only"})})))}})||i;var M=n(44);var j,O,f=Object(a.connect)(((e,t)=>{let{columnId:n}=t;const i=n,o=e.getIn(["settings","columns"]),s=o.findIndex((e=>e.get("uuid")===i));return{settings:i&&s>=0?o.get(s).get("params"):e.getIn(["settings","community"])}}),((e,t)=>{let{columnId:n}=t;return{onChange(t,i){e(n?Object(b.f)(n,t,i):Object(M.c)(["community",...t],i))}}}))(y),I=n(760),v=n(95),C=n(7),x=n(764);const _=Object(d.f)({title:{id:"column.community",defaultMessage:"Local timeline"}});let w=Object(a.connect)(((e,t)=>{let{columnId:n}=t;const i=n,o=e.getIn(["settings","columns"]),s=o.findIndex((e=>e.get("uuid")===i)),c=n&&s>=0?o.get(s).getIn(["params","other","onlyMedia"]):e.getIn(["settings","community","other","onlyMedia"]),a=e.getIn(["timelines","community"+(c?":media":"")]);return{hasUnread:!!a&&a.get("unread")>0,onlyMedia:c}}))(j=Object(d.g)(((O=class extends c.a.PureComponent{constructor(){super(...arguments),this.handlePin=()=>{const{columnId:e,dispatch:t,onlyMedia:n}=this.props;t(e?Object(b.h)(e):Object(b.e)("COMMUNITY",{other:{onlyMedia:n}}))},this.handleMove=e=>{const{columnId:t,dispatch:n}=this.props;n(Object(b.g)(t,e))},this.handleHeaderClick=()=>{this.column.scrollTop()},this.setRef=e=>{this.column=e},this.handleLoadMore=e=>{const{dispatch:t,onlyMedia:n}=this.props;t(Object(p.s)({maxId:e,onlyMedia:n}))}}componentDidMount(){const{dispatch:e,onlyMedia:t}=this.props,{signedIn:n}=this.context.identity;e(Object(p.s)({onlyMedia:t})),n&&(this.disconnect=e(Object(I.a)({onlyMedia:t})))}componentDidUpdate(e){const{signedIn:t}=this.context.identity;if(e.onlyMedia!==this.props.onlyMedia){const{dispatch:e,onlyMedia:n}=this.props;this.disconnect&&this.disconnect(),e(Object(p.s)({onlyMedia:n})),t&&(this.disconnect=e(Object(I.a)({onlyMedia:n})))}}componentWillUnmount(){this.disconnect&&(this.disconnect(),this.disconnect=null)}render(){const{intl:e,hasUnread:t,columnId:n,multiColumn:i,onlyMedia:s}=this.props,a=!!n;return c.a.createElement(u.a,{bindToDocument:!i,ref:this.setRef,label:e.formatMessage(_.title)},Object(o.a)(h.a,{icon:"users",active:t,title:e.formatMessage(_.title),onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:a,multiColumn:i},void 0,Object(o.a)(f,{columnId:n})),Object(o.a)(x.a,{id:"community_timeline"},void 0,Object(o.a)(d.b,{id:"dismissable_banner.community_timeline",defaultMessage:"These are the most recent public posts from people whose accounts are hosted by {domain}.",values:{domain:C.i}})),Object(o.a)(r.a,{trackScroll:!a,scrollKey:"community_timeline-"+n,timelineId:"community"+(s?":media":""),onLoadMore:this.handleLoadMore,emptyMessage:Object(o.a)(d.b,{id:"empty_column.community",defaultMessage:"The local timeline is empty. Write something publicly to get the ball rolling!"}),bindToDocument:!i}),Object(o.a)(v.a,{},void 0,Object(o.a)("title",{},void 0,e.formatMessage(_.title)),Object(o.a)("meta",{name:"robots",content:"noindex"})))}}).contextTypes={router:m.a.object,identity:m.a.object},O.defaultProps={onlyMedia:!1},j=O))||j)||j}}]);
//# sourceMappingURL=community_timeline-4858fb9573389b253b00.chunk.js.map