{"version":3,"sources":["webpack:///./app/javascript/mastodon/features/about/index.js"],"names":["messages","defineMessages","title","rules","blocks","silenced","silencedExplanation","suspended","suspendedExplanation","severityMessages","silence","explanation","suspend","Section","React","PureComponent","state","collapsed","this","props","open","handleClick","onOpen","setState","render","children","className","classNames","active","role","tabIndex","onClick","id","fixedWidth","About","connect","server","getIn","extendedDescription","domainBlocks","injectIntl","handleDomainBlocksOpen","dispatch","fetchDomainBlocks","componentDidMount","fetchServer","fetchExtendedDescription","multiColumn","intl","isLoading","get","bindToDocument","label","formatMessage","blurhash","src","srcSet","map","value","key","replace","join","width","defaultMessage","values","mastodon","href","target","size","length","dangerouslySetInnerHTML","__html","isEmpty","rule","block","name","content"],"mappings":"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","file":"js/features/about-a69e1d55637e6d4be4d3.chunk.js","sourcesContent":["import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Column from 'mastodon/components/column';\nimport LinkFooter from 'mastodon/features/ui/components/link_footer';\nimport { Helmet } from 'react-helmet';\nimport { fetchServer, fetchExtendedDescription, fetchDomainBlocks } from 'mastodon/actions/server';\nimport Account from 'mastodon/containers/account_container';\nimport Skeleton from 'mastodon/components/skeleton';\nimport Icon from 'mastodon/components/icon';\nimport classNames from 'classnames';\nimport Image from 'mastodon/components/image';\n\nconst messages = defineMessages({\n  title: { id: 'column.about', defaultMessage: 'About' },\n  rules: { id: 'about.rules', defaultMessage: 'Server rules' },\n  blocks: { id: 'about.blocks', defaultMessage: 'Moderated servers' },\n  silenced: { id: 'about.domain_blocks.silenced.title', defaultMessage: 'Limited' },\n  silencedExplanation: { id: 'about.domain_blocks.silenced.explanation', defaultMessage: 'You will generally not see profiles and content from this server, unless you explicitly look it up or opt into it by following.' },\n  suspended: { id: 'about.domain_blocks.suspended.title', defaultMessage: 'Suspended' },\n  suspendedExplanation: { id: 'about.domain_blocks.suspended.explanation', defaultMessage: 'No data from this server will be processed, stored or exchanged, making any interaction or communication with users from this server impossible.' },\n});\n\nconst severityMessages = {\n  silence: {\n    title: messages.silenced,\n    explanation: messages.silencedExplanation,\n  },\n\n  suspend: {\n    title: messages.suspended,\n    explanation: messages.suspendedExplanation,\n  },\n};\n\nconst mapStateToProps = state => ({\n  server: state.getIn(['server', 'server']),\n  extendedDescription: state.getIn(['server', 'extendedDescription']),\n  domainBlocks: state.getIn(['server', 'domainBlocks']),\n});\n\nclass Section extends React.PureComponent {\n\n  static propTypes = {\n    title: PropTypes.string,\n    children: PropTypes.node,\n    open: PropTypes.bool,\n    onOpen: PropTypes.func,\n  };\n\n  state = {\n    collapsed: !this.props.open,\n  };\n\n  handleClick = () => {\n    const { onOpen } = this.props;\n    const { collapsed } = this.state;\n\n    this.setState({ collapsed: !collapsed }, () => onOpen && onOpen());\n  }\n\n  render () {\n    const { title, children } = this.props;\n    const { collapsed } = this.state;\n\n    return (\n      <div className={classNames('about__section', { active: !collapsed })}>\n        <div className='about__section__title' role='button' tabIndex='0' onClick={this.handleClick}>\n          <Icon id={collapsed ? 'chevron-right' : 'chevron-down'} fixedWidth /> {title}\n        </div>\n\n        {!collapsed && (\n          <div className='about__section__body'>{children}</div>\n        )}\n      </div>\n    );\n  }\n\n}\n\nexport default @connect(mapStateToProps)\n@injectIntl\nclass About extends React.PureComponent {\n\n  static propTypes = {\n    server: ImmutablePropTypes.map,\n    extendedDescription: ImmutablePropTypes.map,\n    domainBlocks: ImmutablePropTypes.contains({\n      isLoading: PropTypes.bool,\n      isAvailable: PropTypes.bool,\n      items: ImmutablePropTypes.list,\n    }),\n    dispatch: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    multiColumn: PropTypes.bool,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(fetchServer());\n    dispatch(fetchExtendedDescription());\n  }\n\n  handleDomainBlocksOpen = () => {\n    const { dispatch } = this.props;\n    dispatch(fetchDomainBlocks());\n  }\n\n  render () {\n    const { multiColumn, intl, server, extendedDescription, domainBlocks } = this.props;\n    const isLoading = server.get('isLoading');\n\n    return (\n      <Column bindToDocument={!multiColumn} label={intl.formatMessage(messages.title)}>\n        <div className='scrollable about'>\n          <div className='about__header'>\n            <Image blurhash={server.getIn(['thumbnail', 'blurhash'])} src={server.getIn(['thumbnail', 'url'])} srcSet={server.getIn(['thumbnail', 'versions'])?.map((value, key) => `${value} ${key.replace('@', '')}`).join(', ')} className='about__header__hero' />\n            <h1>{isLoading ? <Skeleton width='10ch' /> : server.get('domain')}</h1>\n            <p><FormattedMessage id='about.powered_by' defaultMessage='Decentralized social media powered by {mastodon}' values={{ mastodon: <a href='https://joinmastodon.org' className='about__mail' target='_blank'>Mastodon</a> }} /></p>\n          </div>\n\n          <div className='about__meta'>\n            <div className='about__meta__column'>\n              <h4><FormattedMessage id='server_banner.administered_by' defaultMessage='Administered by:' /></h4>\n\n              <Account id={server.getIn(['contact', 'account', 'id'])} size={36} />\n            </div>\n\n            <hr className='about__meta__divider' />\n\n            <div className='about__meta__column'>\n              <h4><FormattedMessage id='about.contact' defaultMessage='Contact:' /></h4>\n\n              {isLoading ? <Skeleton width='10ch' /> : <a className='about__mail' href={`mailto:${server.getIn(['contact', 'email'])}`}>{server.getIn(['contact', 'email'])}</a>}\n            </div>\n          </div>\n\n          <Section open title={intl.formatMessage(messages.title)}>\n            {extendedDescription.get('isLoading') ? (\n              <>\n                <Skeleton width='100%' />\n                <br />\n                <Skeleton width='100%' />\n                <br />\n                <Skeleton width='100%' />\n                <br />\n                <Skeleton width='70%' />\n              </>\n            ) : (extendedDescription.get('content')?.length > 0 ? (\n              <div\n                className='prose'\n                dangerouslySetInnerHTML={{ __html: extendedDescription.get('content') }}\n              />\n            ) : (\n              <p><FormattedMessage id='about.not_available' defaultMessage='This information has not been made available on this server.' /></p>\n            ))}\n          </Section>\n\n          <Section title={intl.formatMessage(messages.rules)}>\n            {!isLoading && (server.get('rules').isEmpty() ? (\n              <p><FormattedMessage id='about.not_available' defaultMessage='This information has not been made available on this server.' /></p>\n            ) : (\n              <ol className='rules-list'>\n                {server.get('rules').map(rule => (\n                  <li key={rule.get('id')}>\n                    <span className='rules-list__text'>{rule.get('text')}</span>\n                  </li>\n                ))}\n              </ol>\n            ))}\n          </Section>\n\n          <Section title={intl.formatMessage(messages.blocks)} onOpen={this.handleDomainBlocksOpen}>\n            {domainBlocks.get('isLoading') ? (\n              <>\n                <Skeleton width='100%' />\n                <br />\n                <Skeleton width='70%' />\n              </>\n            ) : (domainBlocks.get('isAvailable') ? (\n              <>\n                <p><FormattedMessage id='about.domain_blocks.preamble' defaultMessage='Mastodon generally allows you to view content from and interact with users from any other server in the fediverse. These are the exceptions that have been made on this particular server.' /></p>\n\n                <div className='about__domain-blocks'>\n                  {domainBlocks.get('items').map(block => (\n                    <div className='about__domain-blocks__domain' key={block.get('domain')}>\n                      <div className='about__domain-blocks__domain__header'>\n                        <h6><span title={`SHA-256: ${block.get('digest')}`}>{block.get('domain')}</span></h6>\n                        <span className='about__domain-blocks__domain__type' title={intl.formatMessage(severityMessages[block.get('severity')].explanation)}>{intl.formatMessage(severityMessages[block.get('severity')].title)}</span>\n                      </div>\n\n                      <p>{(block.get('comment') || '').length > 0 ? block.get('comment') : <FormattedMessage id='about.domain_blocks.no_reason_available' defaultMessage='Reason not available' />}</p>\n                    </div>\n                  ))}\n                </div>\n              </>\n            ) : (\n              <p><FormattedMessage id='about.not_available' defaultMessage='This information has not been made available on this server.' /></p>\n            ))}\n          </Section>\n\n          <LinkFooter />\n\n          <div className='about__footer'>\n            <p><FormattedMessage id='about.disclaimer' defaultMessage='Mastodon is free, open-source software, and a trademark of Mastodon gGmbH.' /></p>\n          </div>\n        </div>\n\n        <Helmet>\n          <title>{intl.formatMessage(messages.title)}</title>\n          <meta name='robots' content='all' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n"],"sourceRoot":""}