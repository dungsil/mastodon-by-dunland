(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{824:function(e,s,t){"use strict";t.r(s),t.d(s,"default",(function(){return D}));var a,i,o=t(0),c=t(1),r=t.n(c),n=t(213),d=t(773),l=t(13),u=t(11),g=t(86),h=t(4),b=t(774),m=t(45),f=t(24),p=t.n(f),O=t(2),j=t.n(O),_=t(15),v=t.n(_),M=t(757),N=t(170),x=t(16),w=t(197),C=t(14),S=t(7),W=t(201);const y=Object(h.f)({dismissSuggestion:{id:"suggestions.dismiss",defaultMessage:"Dismiss suggestion"}});let I=Object(h.g)(((i=class extends x.a{constructor(){super(...arguments),this.handleLoadMoreAccounts=()=>this.props.expandSearch("accounts"),this.handleLoadMoreStatuses=()=>this.props.expandSearch("statuses"),this.handleLoadMoreHashtags=()=>this.props.expandSearch("hashtags")}componentDidMount(){""===this.props.searchTerm&&this.props.fetchSuggestions()}componentDidUpdate(){""===this.props.searchTerm&&this.props.fetchSuggestions()}render(){const{intl:e,results:s,suggestions:t,dismissSuggestion:a,searchTerm:i}=this.props;if(""===i&&!t.isEmpty())return Object(o.a)("div",{className:"search-results"},void 0,Object(o.a)("div",{className:"trends"},void 0,Object(o.a)("div",{className:"trends__header"},void 0,Object(o.a)(C.a,{id:"user-plus",fixedWidth:!0}),Object(o.a)(h.b,{id:"suggestions.header",defaultMessage:"You might be interested inâ€¦"})),t&&t.map((s=>Object(o.a)(M.a,{id:s.get("account"),actionIcon:"past_interactions"===s.get("source")?"times":null,actionTitle:"past_interactions"===s.get("source")?e.formatMessage(y.dismissSuggestion):null,onActionClick:a},s.get("account"))))));let c,r,n,d=0;return s.get("accounts")&&s.get("accounts").size>0&&(d+=s.get("accounts").size,c=Object(o.a)("div",{className:"search-results__section"},void 0,Object(o.a)("h5",{},void 0,Object(o.a)(C.a,{id:"users",fixedWidth:!0}),Object(o.a)(h.b,{id:"search_results.accounts",defaultMessage:"People"})),s.get("accounts").map((e=>Object(o.a)(M.a,{id:e},e))),s.get("accounts").size>=5&&Object(o.a)(W.a,{visible:!0,onClick:this.handleLoadMoreAccounts}))),s.get("statuses")&&s.get("statuses").size>0?(d+=s.get("statuses").size,r=Object(o.a)("div",{className:"search-results__section"},void 0,Object(o.a)("h5",{},void 0,Object(o.a)(C.a,{id:"quote-right",fixedWidth:!0}),Object(o.a)(h.b,{id:"search_results.statuses",defaultMessage:"Posts"})),s.get("statuses").map((e=>Object(o.a)(N.a,{id:e},e))),s.get("statuses").size>=5&&Object(o.a)(W.a,{visible:!0,onClick:this.handleLoadMoreStatuses}))):!s.get("statuses")||0!==s.get("statuses").size||S.t||i.startsWith("@")||i.startsWith("#")||i.includes(" ")||(r=Object(o.a)("div",{className:"search-results__section"},void 0,Object(o.a)("h5",{},void 0,Object(o.a)(C.a,{id:"quote-right",fixedWidth:!0}),Object(o.a)(h.b,{id:"search_results.statuses",defaultMessage:"Posts"})),Object(o.a)("div",{className:"search-results__info"},void 0,Object(o.a)(h.b,{id:"search_results.statuses_fts_disabled",defaultMessage:"Searching posts by their content is not enabled on this Mastodon server."})))),s.get("hashtags")&&s.get("hashtags").size>0&&(d+=s.get("hashtags").size,n=Object(o.a)("div",{className:"search-results__section"},void 0,Object(o.a)("h5",{},void 0,Object(o.a)(C.a,{id:"hashtag",fixedWidth:!0}),Object(o.a)(h.b,{id:"search_results.hashtags",defaultMessage:"Hashtags"})),s.get("hashtags").map((e=>Object(o.a)(w.a,{hashtag:e},e.get("name")))),s.get("hashtags").size>=5&&Object(o.a)(W.a,{visible:!0,onClick:this.handleLoadMoreHashtags}))),Object(o.a)("div",{className:"search-results"},void 0,Object(o.a)("div",{className:"search-results__header"},void 0,Object(o.a)(C.a,{id:"search",fixedWidth:!0}),Object(o.a)(h.b,{id:"search_results.total",defaultMessage:"{count, number} {count, plural, one {result} other {results}}",values:{count:d}})),c,r,n)}}).propTypes={results:v.a.map.isRequired,suggestions:v.a.list.isRequired,fetchSuggestions:j.a.func.isRequired,expandSearch:j.a.func.isRequired,dismissSuggestion:j.a.func.isRequired,searchTerm:j.a.string,intl:j.a.object.isRequired},a=i))||a;var L=t(123),T=t(58);var k,z=Object(l.connect)((e=>({results:e.getIn(["search","results"]),suggestions:e.getIn(["suggestions","items"]),searchTerm:e.getIn(["search","searchTerm"])})),(e=>({fetchSuggestions:()=>e(Object(L.f)()),expandSearch:s=>e(Object(T.j)(s)),dismissSuggestion:s=>e(Object(L.e)(s.get("id")))})))(I),q=t(17),F=t(202),P=t(139),R=t(752),A=t(95);const B=Object(h.f)({start:{id:"getting_started.heading",defaultMessage:"Getting started"},home_timeline:{id:"tabs_bar.home",defaultMessage:"Home"},notifications:{id:"tabs_bar.notifications",defaultMessage:"Notifications"},public:{id:"navigation_bar.public_timeline",defaultMessage:"Federated timeline"},community:{id:"navigation_bar.community_timeline",defaultMessage:"Local timeline"},preferences:{id:"navigation_bar.preferences",defaultMessage:"Preferences"},logout:{id:"navigation_bar.logout",defaultMessage:"Logout"},compose:{id:"navigation_bar.compose",defaultMessage:"Compose new post"},logoutMessage:{id:"confirmations.logout.message",defaultMessage:"Are you sure you want to log out?"},logoutConfirm:{id:"confirmations.logout.confirm",defaultMessage:"Log out"}});let D=Object(l.connect)(((e,s)=>({columns:e.getIn(["settings","columns"]),showSearch:!!s.multiColumn&&(e.getIn(["search","submitted"])&&!e.getIn(["search","hidden"]))})))(k=Object(h.g)(k=class extends r.a.PureComponent{constructor(){super(...arguments),this.handleLogoutClick=e=>{const{dispatch:s,intl:t}=this.props;return e.preventDefault(),e.stopPropagation(),s(Object(q.d)("CONFIRM",{message:t.formatMessage(B.logoutMessage),confirm:t.formatMessage(B.logoutConfirm),closeWhenConfirm:!1,onConfirm:()=>Object(P.a)()})),!1},this.onFocus=()=>{this.props.dispatch(Object(u.eb)(!0))},this.onBlur=()=>{this.props.dispatch(Object(u.eb)(!1))}}componentDidMount(){const{dispatch:e}=this.props;e(Object(u.qb)())}componentWillUnmount(){const{dispatch:e}=this.props;e(Object(u.Bb)())}render(){const{multiColumn:e,showSearch:s,intl:t}=this.props;if(e){const{columns:a}=this.props;return Object(o.a)("div",{className:"drawer",role:"region","aria-label":t.formatMessage(B.compose)},void 0,Object(o.a)("nav",{className:"drawer__header"},void 0,Object(o.a)(g.a,{to:"/getting-started",className:"drawer__tab",title:t.formatMessage(B.start),"aria-label":t.formatMessage(B.start)},void 0,Object(o.a)(C.a,{id:"bars",fixedWidth:!0})),!a.some((e=>"HOME"===e.get("id")))&&Object(o.a)(g.a,{to:"/home",className:"drawer__tab",title:t.formatMessage(B.home_timeline),"aria-label":t.formatMessage(B.home_timeline)},void 0,Object(o.a)(C.a,{id:"home",fixedWidth:!0})),!a.some((e=>"NOTIFICATIONS"===e.get("id")))&&Object(o.a)(g.a,{to:"/notifications",className:"drawer__tab",title:t.formatMessage(B.notifications),"aria-label":t.formatMessage(B.notifications)},void 0,Object(o.a)(C.a,{id:"bell",fixedWidth:!0})),!a.some((e=>"COMMUNITY"===e.get("id")))&&Object(o.a)(g.a,{to:"/public/local",className:"drawer__tab",title:t.formatMessage(B.community),"aria-label":t.formatMessage(B.community)},void 0,Object(o.a)(C.a,{id:"users",fixedWidth:!0})),!a.some((e=>"PUBLIC"===e.get("id")))&&Object(o.a)(g.a,{to:"/public",className:"drawer__tab",title:t.formatMessage(B.public),"aria-label":t.formatMessage(B.public)},void 0,Object(o.a)(C.a,{id:"globe",fixedWidth:!0})),Object(o.a)("a",{href:"/settings/preferences",className:"drawer__tab",title:t.formatMessage(B.preferences),"aria-label":t.formatMessage(B.preferences)},void 0,Object(o.a)(C.a,{id:"cog",fixedWidth:!0})),Object(o.a)("a",{href:"/auth/sign_out",className:"drawer__tab",title:t.formatMessage(B.logout),"aria-label":t.formatMessage(B.logout),onClick:this.handleLogoutClick},void 0,Object(o.a)(C.a,{id:"sign-out",fixedWidth:!0}))),e&&Object(o.a)(b.a,{}),Object(o.a)("div",{className:"drawer__pager"},void 0,Object(o.a)("div",{className:"drawer__inner",onFocus:this.onFocus},void 0,Object(o.a)(d.a,{onClose:this.onBlur}),Object(o.a)(n.a,{}),Object(o.a)("div",{className:"drawer__inner__mastodon"},void 0,Object(o.a)("img",{alt:"",draggable:"false",src:S.m||F.default}))),Object(o.a)(m.a,{defaultStyle:{x:-100},style:{x:p()(s?0:-100,{stiffness:210,damping:20})}},void 0,(e=>{let{x:s}=e;return Object(o.a)("div",{className:"drawer__inner darker",style:{transform:`translateX(${s}%)`,visibility:-100===s?"hidden":"visible"}},void 0,Object(o.a)(z,{}))}))))}return Object(o.a)(R.a,{onFocus:this.onFocus},void 0,Object(o.a)(d.a,{onClose:this.onBlur}),Object(o.a)(n.a,{}),Object(o.a)(A.a,{},void 0,Object(o.a)("meta",{name:"robots",content:"noindex"})))}})||k)||k}}]);
//# sourceMappingURL=compose-a4a2cbc8f8141609dcdc.chunk.js.map