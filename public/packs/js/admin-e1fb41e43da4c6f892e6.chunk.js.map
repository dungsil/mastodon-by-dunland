{"version":3,"sources":["webpack:///./app/javascript/packs/admin.js","webpack:///./app/javascript/mastodon/components/admin lazy ^\\.\\/.*$ namespace object"],"names":["setAnnouncementEndsAttributes","target","valid","value","validity","element","document","querySelector","classList","remove","required","min","add","removeAttribute","delegate","batchCheckboxClassName","showSelectAll","hideSelectAll","selectAllMatchingElement","hiddenField","selectedMsg","notSelectedMsg","forEach","call","querySelectorAll","content","checked","active","checkAllElement","every","indeterminate","some","click","form","submit","onDomainBlockSeverityChange","rejectMediaDiv","rejectReportsDiv","style","display","onEnableBootstrapTimelineAccountsChange","bootstrapTimelineAccountsField","disabled","parentElement","onChangeRegistrationMode","enabled","input","contains","convertUTCDateTimeToLocal","date","Date","twoChars","x","toString","padStart","getFullYear","getMonth","getDate","getHours","getMinutes","ready","domainBlockSeverityInput","getElementById","enableBootstrapTimelineAccounts","registrationMode","addEventListener","e","domain","url","URL","event","href","searchParams","set","placeholder","match","exec","fullISO8601","toISOString","slice","indexOf","convertLocalDatetimeToUTC","announcementStartsAt","React","require","ReactDOM","componentName","getAttribute","locale","componentProps","JSON","parse","then","default","AdminComponent","Component","render","catch","error","console","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","Error","code","ids","id","all","keys","Object","module","exports"],"mappings":"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","file":"js/admin-e1fb41e43da4c6f892e6.chunk.js","sourcesContent":["import './public-path';\nimport { delegate } from '@rails/ujs';\nimport ready from '../mastodon/ready';\n\nconst setAnnouncementEndsAttributes = (target) => {\n  const valid = target?.value && target?.validity?.valid;\n  const element = document.querySelector('input[type=\"datetime-local\"]#announcement_ends_at');\n  if (valid) {\n    element.classList.remove('optional');\n    element.required = true;\n    element.min = target.value;\n  } else {\n    element.classList.add('optional');\n    element.removeAttribute('required');\n    element.removeAttribute('min');\n  }\n};\n\ndelegate(document, 'input[type=\"datetime-local\"]#announcement_starts_at', 'change', ({ target }) => {\n  setAnnouncementEndsAttributes(target);\n});\n\nconst batchCheckboxClassName = '.batch-checkbox input[type=\"checkbox\"]';\n\nconst showSelectAll = () => {\n  const selectAllMatchingElement = document.querySelector('.batch-table__select-all');\n  selectAllMatchingElement.classList.add('active');\n};\n\nconst hideSelectAll = () => {\n  const selectAllMatchingElement = document.querySelector('.batch-table__select-all');\n  const hiddenField = document.querySelector('#select_all_matching');\n  const selectedMsg = document.querySelector('.batch-table__select-all .selected');\n  const notSelectedMsg = document.querySelector('.batch-table__select-all .not-selected');\n\n  selectAllMatchingElement.classList.remove('active');\n  selectedMsg.classList.remove('active');\n  notSelectedMsg.classList.add('active');\n  hiddenField.value = '0';\n};\n\ndelegate(document, '#batch_checkbox_all', 'change', ({ target }) => {\n  const selectAllMatchingElement = document.querySelector('.batch-table__select-all');\n\n  [].forEach.call(document.querySelectorAll(batchCheckboxClassName), (content) => {\n    content.checked = target.checked;\n  });\n\n  if (selectAllMatchingElement) {\n    if (target.checked) {\n      showSelectAll();\n    } else {\n      hideSelectAll();\n    }\n  }\n});\n\ndelegate(document, '.batch-table__select-all button', 'click', () => {\n  const hiddenField = document.querySelector('#select_all_matching');\n  const active = hiddenField.value === '1';\n  const selectedMsg = document.querySelector('.batch-table__select-all .selected');\n  const notSelectedMsg = document.querySelector('.batch-table__select-all .not-selected');\n\n  if (active) {\n    hiddenField.value = '0';\n    selectedMsg.classList.remove('active');\n    notSelectedMsg.classList.add('active');\n  } else {\n    hiddenField.value = '1';\n    notSelectedMsg.classList.remove('active');\n    selectedMsg.classList.add('active');\n  }\n});\n\ndelegate(document, batchCheckboxClassName, 'change', () => {\n  const checkAllElement = document.querySelector('#batch_checkbox_all');\n  const selectAllMatchingElement = document.querySelector('.batch-table__select-all');\n\n  if (checkAllElement) {\n    checkAllElement.checked = [].every.call(document.querySelectorAll(batchCheckboxClassName), (content) => content.checked);\n    checkAllElement.indeterminate = !checkAllElement.checked && [].some.call(document.querySelectorAll(batchCheckboxClassName), (content) => content.checked);\n\n    if (selectAllMatchingElement) {\n      if (checkAllElement.checked) {\n        showSelectAll();\n      } else {\n        hideSelectAll();\n      }\n    }\n  }\n});\n\ndelegate(document, '.media-spoiler-show-button', 'click', () => {\n  [].forEach.call(document.querySelectorAll('button.media-spoiler'), (element) => {\n    element.click();\n  });\n});\n\ndelegate(document, '.media-spoiler-hide-button', 'click', () => {\n  [].forEach.call(document.querySelectorAll('.spoiler-button.spoiler-button--visible button'), (element) => {\n    element.click();\n  });\n});\n\ndelegate(document, '.filter-subset--with-select select', 'change', ({ target }) => {\n  target.form.submit();\n});\n\nconst onDomainBlockSeverityChange = (target) => {\n  const rejectMediaDiv   = document.querySelector('.input.with_label.domain_block_reject_media');\n  const rejectReportsDiv = document.querySelector('.input.with_label.domain_block_reject_reports');\n\n  if (rejectMediaDiv) {\n    rejectMediaDiv.style.display = (target.value === 'suspend') ? 'none' : 'block';\n  }\n\n  if (rejectReportsDiv) {\n    rejectReportsDiv.style.display = (target.value === 'suspend') ? 'none' : 'block';\n  }\n};\n\ndelegate(document, '#domain_block_severity', 'change', ({ target }) => onDomainBlockSeverityChange(target));\n\nconst onEnableBootstrapTimelineAccountsChange = (target) => {\n  const bootstrapTimelineAccountsField = document.querySelector('#form_admin_settings_bootstrap_timeline_accounts');\n\n  if (bootstrapTimelineAccountsField) {\n    bootstrapTimelineAccountsField.disabled = !target.checked;\n    if (target.checked) {\n      bootstrapTimelineAccountsField.parentElement.classList.remove('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.remove('disabled');\n    } else {\n      bootstrapTimelineAccountsField.parentElement.classList.add('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.add('disabled');\n    }\n  }\n};\n\ndelegate(document, '#form_admin_settings_enable_bootstrap_timeline_accounts', 'change', ({ target }) => onEnableBootstrapTimelineAccountsChange(target));\n\nconst onChangeRegistrationMode = (target) => {\n  const enabled = target.value === 'approved';\n\n  [].forEach.call(document.querySelectorAll('#form_admin_settings_require_invite_text'), (input) => {\n    input.disabled = !enabled;\n    if (enabled) {\n      let element = input;\n      do {\n        element.classList.remove('disabled');\n        element = element.parentElement;\n      } while (element && !element.classList.contains('fields-group'));\n    } else {\n      let element = input;\n      do {\n        element.classList.add('disabled');\n        element = element.parentElement;\n      } while (element && !element.classList.contains('fields-group'));\n    }\n  });\n};\n\nconst convertUTCDateTimeToLocal = (value) => {\n  const date = new Date(value + 'Z');\n  const twoChars = (x) => (x.toString().padStart(2, '0'));\n  return `${date.getFullYear()}-${twoChars(date.getMonth()+1)}-${twoChars(date.getDate())}T${twoChars(date.getHours())}:${twoChars(date.getMinutes())}`;\n};\n\nconst convertLocalDatetimeToUTC = (value) => {\n  const re = /^([0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})/;\n  const match = re.exec(value);\n  const date = new Date(match[1], match[2] - 1, match[3], match[4], match[5]);\n  const fullISO8601 = date.toISOString();\n  return fullISO8601.slice(0, fullISO8601.indexOf('T') + 6);\n};\n\ndelegate(document, '#form_admin_settings_registrations_mode', 'change', ({ target }) => onChangeRegistrationMode(target));\n\nready(() => {\n  const domainBlockSeverityInput = document.getElementById('domain_block_severity');\n  if (domainBlockSeverityInput) onDomainBlockSeverityChange(domainBlockSeverityInput);\n\n  const enableBootstrapTimelineAccounts = document.getElementById('form_admin_settings_enable_bootstrap_timeline_accounts');\n  if (enableBootstrapTimelineAccounts) onEnableBootstrapTimelineAccountsChange(enableBootstrapTimelineAccounts);\n\n  const registrationMode = document.getElementById('form_admin_settings_registrations_mode');\n  if (registrationMode) onChangeRegistrationMode(registrationMode);\n\n  document.querySelector('a#add-instance-button')?.addEventListener('click', (e) => {\n    const domain = document.getElementById('by_domain')?.value;\n\n    if (domain) {\n      const url = new URL(event.target.href);\n      url.searchParams.set('_domain', domain);\n      e.target.href = url;\n    }\n  });\n\n  [].forEach.call(document.querySelectorAll('input[type=\"datetime-local\"]'), element => {\n    if (element.value) {\n      element.value = convertUTCDateTimeToLocal(element.value);\n    }\n    if (element.placeholder) {\n      element.placeholder = convertUTCDateTimeToLocal(element.placeholder);\n    }\n  });\n\n  delegate(document, 'form', 'submit', ({ target }) => {\n    [].forEach.call(target.querySelectorAll('input[type=\"datetime-local\"]'), element => {\n      if (element.value && element.validity.valid) {\n        element.value = convertLocalDatetimeToUTC(element.value);\n      }\n    });\n  });\n\n  const announcementStartsAt = document.querySelector('input[type=\"datetime-local\"]#announcement_starts_at');\n  if (announcementStartsAt) {\n    setAnnouncementEndsAttributes(announcementStartsAt);\n  }\n\n  const React    = require('react');\n  const ReactDOM = require('react-dom');\n\n  [].forEach.call(document.querySelectorAll('[data-admin-component]'), element => {\n    const componentName  = element.getAttribute('data-admin-component');\n    const { locale, ...componentProps } = JSON.parse(element.getAttribute('data-props'));\n\n    import('../mastodon/containers/admin_component').then(({ default: AdminComponent }) => {\n      return import('../mastodon/components/admin/' + componentName).then(({ default: Component }) => {\n        ReactDOM.render((\n          <AdminComponent locale={locale}>\n            <Component {...componentProps} />\n          </AdminComponent>\n        ), element);\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  });\n});\n","var map = {\n\t\"./Counter\": [\n\t\t513,\n\t\t0,\n\t\t1\n\t],\n\t\"./Counter.js\": [\n\t\t513,\n\t\t0,\n\t\t1\n\t],\n\t\"./Dimension\": [\n\t\t514,\n\t\t0,\n\t\t2\n\t],\n\t\"./Dimension.js\": [\n\t\t514,\n\t\t0,\n\t\t2\n\t],\n\t\"./ReportReasonSelector\": [\n\t\t515,\n\t\t0,\n\t\t3\n\t],\n\t\"./ReportReasonSelector.js\": [\n\t\t515,\n\t\t0,\n\t\t3\n\t],\n\t\"./Retention\": [\n\t\t516,\n\t\t0,\n\t\t4\n\t],\n\t\"./Retention.js\": [\n\t\t516,\n\t\t0,\n\t\t4\n\t],\n\t\"./Trends\": [\n\t\t517,\n\t\t0,\n\t\t5\n\t],\n\t\"./Trends.js\": [\n\t\t517,\n\t\t0,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 523;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}