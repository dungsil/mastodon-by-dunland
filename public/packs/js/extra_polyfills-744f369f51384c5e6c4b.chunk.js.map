{"version":3,"sources":["webpack:///./app/javascript/mastodon/extra_polyfills.js","webpack:///./node_modules/abortcontroller-polyfill/dist/abortcontroller-polyfill-only.js","webpack:///./node_modules/requestidlecallback/index.js","webpack:///./node_modules/object-fit-images/dist/ofi.common-js.js"],"names":["objectFitImages","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","bind","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","call","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","_superPropBase","object","property","hasOwnProperty","_get","get","receiver","base","desc","getOwnPropertyDescriptor","Emitter","type","callback","options","listeners","push","stack","l","splice","event","stackToCall","slice","listener","Promise","resolve","then","once","removeEventListener","defaultPrevented","AbortSignal","_Emitter","_super","_this","undefined","aborted","onabort","AbortController","reason","Event","document","createEvent","initEvent","createEventObject","bubbles","cancelable","signalReason","Error","name","DOMException","err","signal","dispatchEvent","polyfillNeeded","__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL","console","log","Request","Symbol","toStringTag","global","scheduleStart","throttleDelay","lazytimer","lazyraf","root","window","requestAnimationFrame","cancelRequestAnimationFrame","setTimeout","clearTimeout","tasks","runAttempts","isRunning","remainingTime","minThrottle","throttle","index","taskStart","tasklength","IdleDeadline","timeRemaining","Date","now","setInactive","debounce","fn","id","timestamp","wait","check","last","abortRunning","onInputorMutation","scheduleLazy","scheduleAfterRaf","runTasks","scheduleRaf","task","len","timeThreshold","shift","requestIdleCallbackShim","cancelIdleCallbackShim","requestIdleCallback","cancelIdleCallback","timeout","rIC","timeRemainingProto","IdleCallbackDeadline","addEventListener","forEach","capture","passive","MutationObserver","observe","documentElement","childList","subtree","attributes","request","cancel","OFI","propRegex","testImg","Image","style","supportsObjectFit","supportsObjectPosition","supportsOFI","supportsCurrentSrc","currentSrc","nativeGetAttribute","getAttribute","nativeSetAttribute","setAttribute","autoModeEnabled","setPlaceholder","img","width","height","placeholder","onImageReady","naturalWidth","fixOne","el","parsed","getComputedStyle","fontFamily","exec","getStyle","ofi","skipTest","srcset","src","naturalHeight","descriptors","prop","set","ss","keepSrcUsable","warn","picturefill","pf","_","ns","evaled","fillImg","reselect","curSrc","supported","polyfillCurrentSrc","backgroundImage","replace","backgroundPosition","backgroundRepeat","backgroundOrigin","test","backgroundSize","fix","imgs","opts","startAutoMode","getElementsByTagName","querySelectorAll","body","tagName","watchMQ","getOfiImageMaybe","HTMLImageElement","String","hijackAttributes","module","exports"],"mappings":"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","file":"js/extra_polyfills-744f369f51384c5e6c4b.chunk.js","sourcesContent":["import 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only';\nimport 'intersection-observer';\nimport 'requestidlecallback';\nimport objectFitImages from 'object-fit-images';\n\nobjectFitImages();\n","(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) : factory();\n})(function () {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    Object.defineProperty(subClass, \"prototype\", {\n      writable: false\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n    return _setPrototypeOf(o, p);\n  }\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n    return self;\n  }\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    } else if (call !== void 0) {\n      throw new TypeError(\"Derived constructors may only return object or undefined\");\n    }\n    return _assertThisInitialized(self);\n  }\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n        result;\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n    return object;\n  }\n  function _get() {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get.bind();\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n        if (desc.get) {\n          return desc.get.call(arguments.length < 3 ? target : receiver);\n        }\n        return desc.value;\n      };\n    }\n    return _get.apply(this, arguments);\n  }\n  var Emitter = /*#__PURE__*/function () {\n    function Emitter() {\n      _classCallCheck(this, Emitter);\n      Object.defineProperty(this, 'listeners', {\n        value: {},\n        writable: true,\n        configurable: true\n      });\n    }\n    _createClass(Emitter, [{\n      key: \"addEventListener\",\n      value: function addEventListener(type, callback, options) {\n        if (!(type in this.listeners)) {\n          this.listeners[type] = [];\n        }\n        this.listeners[type].push({\n          callback: callback,\n          options: options\n        });\n      }\n    }, {\n      key: \"removeEventListener\",\n      value: function removeEventListener(type, callback) {\n        if (!(type in this.listeners)) {\n          return;\n        }\n        var stack = this.listeners[type];\n        for (var i = 0, l = stack.length; i < l; i++) {\n          if (stack[i].callback === callback) {\n            stack.splice(i, 1);\n            return;\n          }\n        }\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (!(event.type in this.listeners)) {\n          return;\n        }\n        var stack = this.listeners[event.type];\n        var stackToCall = stack.slice();\n        for (var i = 0, l = stackToCall.length; i < l; i++) {\n          var listener = stackToCall[i];\n          try {\n            listener.callback.call(this, event);\n          } catch (e) {\n            Promise.resolve().then(function () {\n              throw e;\n            });\n          }\n          if (listener.options && listener.options.once) {\n            this.removeEventListener(event.type, listener.callback);\n          }\n        }\n        return !event.defaultPrevented;\n      }\n    }]);\n    return Emitter;\n  }();\n  var AbortSignal = /*#__PURE__*/function (_Emitter) {\n    _inherits(AbortSignal, _Emitter);\n    var _super = _createSuper(AbortSignal);\n    function AbortSignal() {\n      var _this;\n      _classCallCheck(this, AbortSignal);\n      _this = _super.call(this); // Some versions of babel does not transpile super() correctly for IE <= 10, if the parent\n      // constructor has failed to run, then \"this.listeners\" will still be undefined and then we call\n      // the parent constructor directly instead as a workaround. For general details, see babel bug:\n      // https://github.com/babel/babel/issues/3041\n      // This hack was added as a fix for the issue described here:\n      // https://github.com/Financial-Times/polyfill-library/pull/59#issuecomment-477558042\n\n      if (!_this.listeners) {\n        Emitter.call(_assertThisInitialized(_this));\n      } // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController().signal) to be [] for compat with the native impl\n\n      Object.defineProperty(_assertThisInitialized(_this), 'aborted', {\n        value: false,\n        writable: true,\n        configurable: true\n      });\n      Object.defineProperty(_assertThisInitialized(_this), 'onabort', {\n        value: null,\n        writable: true,\n        configurable: true\n      });\n      Object.defineProperty(_assertThisInitialized(_this), 'reason', {\n        value: undefined,\n        writable: true,\n        configurable: true\n      });\n      return _this;\n    }\n    _createClass(AbortSignal, [{\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortSignal]';\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (event.type === 'abort') {\n          this.aborted = true;\n          if (typeof this.onabort === 'function') {\n            this.onabort.call(this, event);\n          }\n        }\n        _get(_getPrototypeOf(AbortSignal.prototype), \"dispatchEvent\", this).call(this, event);\n      }\n    }]);\n    return AbortSignal;\n  }(Emitter);\n  var AbortController = /*#__PURE__*/function () {\n    function AbortController() {\n      _classCallCheck(this, AbortController);\n\n      // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController()) to be [] for compat with the native impl\n      Object.defineProperty(this, 'signal', {\n        value: new AbortSignal(),\n        writable: true,\n        configurable: true\n      });\n    }\n    _createClass(AbortController, [{\n      key: \"abort\",\n      value: function abort(reason) {\n        var event;\n        try {\n          event = new Event('abort');\n        } catch (e) {\n          if (typeof document !== 'undefined') {\n            if (!document.createEvent) {\n              // For Internet Explorer 8:\n              event = document.createEventObject();\n              event.type = 'abort';\n            } else {\n              // For Internet Explorer 11:\n              event = document.createEvent('Event');\n              event.initEvent('abort', false, false);\n            }\n          } else {\n            // Fallback where document isn't available:\n            event = {\n              type: 'abort',\n              bubbles: false,\n              cancelable: false\n            };\n          }\n        }\n        var signalReason = reason;\n        if (signalReason === undefined) {\n          if (typeof document === 'undefined') {\n            signalReason = new Error('This operation was aborted');\n            signalReason.name = 'AbortError';\n          } else {\n            try {\n              signalReason = new DOMException('signal is aborted without reason');\n            } catch (err) {\n              // IE 11 does not support calling the DOMException constructor, use a\n              // regular error object on it instead.\n              signalReason = new Error('This operation was aborted');\n              signalReason.name = 'AbortError';\n            }\n          }\n        }\n        this.signal.reason = signalReason;\n        this.signal.dispatchEvent(event);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortController]';\n      }\n    }]);\n    return AbortController;\n  }();\n  if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n    // These are necessary to make sure that we get correct output for:\n    // Object.prototype.toString.call(new AbortController())\n    AbortController.prototype[Symbol.toStringTag] = 'AbortController';\n    AbortSignal.prototype[Symbol.toStringTag] = 'AbortSignal';\n  }\n  function polyfillNeeded(self) {\n    if (self.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      console.log('__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill');\n      return true;\n    } // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // so the below feature detection needs the !self.AbortController part.\n    // The Request.prototype check is also needed because Safari versions 11.1.2\n    // up to and including 12.1.x has a window.AbortController present but still\n    // does NOT correctly implement abortable fetch:\n    // https://bugs.webkit.org/show_bug.cgi?id=174980#c2\n\n    return typeof self.Request === 'function' && !self.Request.prototype.hasOwnProperty('signal') || !self.AbortController;\n  }\n  (function (self) {\n    if (!polyfillNeeded(self)) {\n      return;\n    }\n    self.AbortController = AbortController;\n    self.AbortSignal = AbortSignal;\n  })(typeof self !== 'undefined' ? self : global);\n});","(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory();\n  } else {\n    window.idleCallbackShim = factory();\n  }\n})(function () {\n  'use strict';\n\n  var scheduleStart, throttleDelay, lazytimer, lazyraf;\n  var root = typeof window != 'undefined' ? window : typeof global != undefined ? global : this || {};\n  var requestAnimationFrame = root.cancelRequestAnimationFrame && root.requestAnimationFrame || setTimeout;\n  var cancelRequestAnimationFrame = root.cancelRequestAnimationFrame || clearTimeout;\n  var tasks = [];\n  var runAttempts = 0;\n  var isRunning = false;\n  var remainingTime = 7;\n  var minThrottle = 35;\n  var throttle = 125;\n  var index = 0;\n  var taskStart = 0;\n  var tasklength = 0;\n  var IdleDeadline = {\n    get didTimeout() {\n      return false;\n    },\n    timeRemaining: function () {\n      var timeRemaining = remainingTime - (Date.now() - taskStart);\n      return timeRemaining < 0 ? 0 : timeRemaining;\n    }\n  };\n  var setInactive = debounce(function () {\n    remainingTime = 22;\n    throttle = 66;\n    minThrottle = 0;\n  });\n  function debounce(fn) {\n    var id, timestamp;\n    var wait = 99;\n    var check = function () {\n      var last = Date.now() - timestamp;\n      if (last < wait) {\n        id = setTimeout(check, wait - last);\n      } else {\n        id = null;\n        fn();\n      }\n    };\n    return function () {\n      timestamp = Date.now();\n      if (!id) {\n        id = setTimeout(check, wait);\n      }\n    };\n  }\n  function abortRunning() {\n    if (isRunning) {\n      if (lazyraf) {\n        cancelRequestAnimationFrame(lazyraf);\n      }\n      if (lazytimer) {\n        clearTimeout(lazytimer);\n      }\n      isRunning = false;\n    }\n  }\n  function onInputorMutation() {\n    if (throttle != 125) {\n      remainingTime = 7;\n      throttle = 125;\n      minThrottle = 35;\n      if (isRunning) {\n        abortRunning();\n        scheduleLazy();\n      }\n    }\n    setInactive();\n  }\n  function scheduleAfterRaf() {\n    lazyraf = null;\n    lazytimer = setTimeout(runTasks, 0);\n  }\n  function scheduleRaf() {\n    lazytimer = null;\n    requestAnimationFrame(scheduleAfterRaf);\n  }\n  function scheduleLazy() {\n    if (isRunning) {\n      return;\n    }\n    throttleDelay = throttle - (Date.now() - taskStart);\n    scheduleStart = Date.now();\n    isRunning = true;\n    if (minThrottle && throttleDelay < minThrottle) {\n      throttleDelay = minThrottle;\n    }\n    if (throttleDelay > 9) {\n      lazytimer = setTimeout(scheduleRaf, throttleDelay);\n    } else {\n      throttleDelay = 0;\n      scheduleRaf();\n    }\n  }\n  function runTasks() {\n    var task, i, len;\n    var timeThreshold = remainingTime > 9 ? 9 : 1;\n    taskStart = Date.now();\n    isRunning = false;\n    lazytimer = null;\n    if (runAttempts > 2 || taskStart - throttleDelay - 50 < scheduleStart) {\n      for (i = 0, len = tasks.length; i < len && IdleDeadline.timeRemaining() > timeThreshold; i++) {\n        task = tasks.shift();\n        tasklength++;\n        if (task) {\n          task(IdleDeadline);\n        }\n      }\n    }\n    if (tasks.length) {\n      scheduleLazy();\n    } else {\n      runAttempts = 0;\n    }\n  }\n  function requestIdleCallbackShim(task) {\n    index++;\n    tasks.push(task);\n    scheduleLazy();\n    return index;\n  }\n  function cancelIdleCallbackShim(id) {\n    var index = id - 1 - tasklength;\n    if (tasks[index]) {\n      tasks[index] = null;\n    }\n  }\n  if (!root.requestIdleCallback || !root.cancelIdleCallback) {\n    root.requestIdleCallback = requestIdleCallbackShim;\n    root.cancelIdleCallback = cancelIdleCallbackShim;\n    if (root.document && document.addEventListener) {\n      root.addEventListener('scroll', onInputorMutation, true);\n      root.addEventListener('resize', onInputorMutation);\n      document.addEventListener('focus', onInputorMutation, true);\n      document.addEventListener('mouseover', onInputorMutation, true);\n      ['click', 'keypress', 'touchstart', 'mousedown'].forEach(function (name) {\n        document.addEventListener(name, onInputorMutation, {\n          capture: true,\n          passive: true\n        });\n      });\n      if (root.MutationObserver) {\n        new MutationObserver(onInputorMutation).observe(document.documentElement, {\n          childList: true,\n          subtree: true,\n          attributes: true\n        });\n      }\n    }\n  } else {\n    try {\n      root.requestIdleCallback(function () {}, {\n        timeout: 0\n      });\n    } catch (e) {\n      (function (rIC) {\n        var timeRemainingProto, timeRemaining;\n        root.requestIdleCallback = function (fn, timeout) {\n          if (timeout && typeof timeout.timeout == 'number') {\n            return rIC(fn, timeout.timeout);\n          }\n          return rIC(fn);\n        };\n        if (root.IdleCallbackDeadline && (timeRemainingProto = IdleCallbackDeadline.prototype)) {\n          timeRemaining = Object.getOwnPropertyDescriptor(timeRemainingProto, 'timeRemaining');\n          if (!timeRemaining || !timeRemaining.configurable || !timeRemaining.get) {\n            return;\n          }\n          Object.defineProperty(timeRemainingProto, 'timeRemaining', {\n            value: function () {\n              return timeRemaining.get.call(this);\n            },\n            enumerable: true,\n            configurable: true\n          });\n        }\n      })(root.requestIdleCallback);\n    }\n  }\n  return {\n    request: requestIdleCallbackShim,\n    cancel: cancelIdleCallbackShim\n  };\n});","/*! npm.im/object-fit-images 3.2.4 */\n'use strict';\n\nvar OFI = 'bfred-it:object-fit-images';\nvar propRegex = /(object-fit|object-position)\\s*:\\s*([-.\\w\\s%]+)/g;\nvar testImg = typeof Image === 'undefined' ? {\n  style: {\n    'object-position': 1\n  }\n} : new Image();\nvar supportsObjectFit = ('object-fit' in testImg.style);\nvar supportsObjectPosition = ('object-position' in testImg.style);\nvar supportsOFI = ('background-size' in testImg.style);\nvar supportsCurrentSrc = typeof testImg.currentSrc === 'string';\nvar nativeGetAttribute = testImg.getAttribute;\nvar nativeSetAttribute = testImg.setAttribute;\nvar autoModeEnabled = false;\nfunction createPlaceholder(w, h) {\n  return \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='\" + w + \"' height='\" + h + \"'%3E%3C/svg%3E\";\n}\nfunction polyfillCurrentSrc(el) {\n  if (el.srcset && !supportsCurrentSrc && window.picturefill) {\n    var pf = window.picturefill._;\n    // parse srcset with picturefill where currentSrc isn't available\n    if (!el[pf.ns] || !el[pf.ns].evaled) {\n      // force synchronous srcset parsing\n      pf.fillImg(el, {\n        reselect: true\n      });\n    }\n    if (!el[pf.ns].curSrc) {\n      // force picturefill to parse srcset\n      el[pf.ns].supported = false;\n      pf.fillImg(el, {\n        reselect: true\n      });\n    }\n\n    // retrieve parsed currentSrc, if any\n    el.currentSrc = el[pf.ns].curSrc || el.src;\n  }\n}\nfunction getStyle(el) {\n  var style = getComputedStyle(el).fontFamily;\n  var parsed;\n  var props = {};\n  while ((parsed = propRegex.exec(style)) !== null) {\n    props[parsed[1]] = parsed[2];\n  }\n  return props;\n}\nfunction setPlaceholder(img, width, height) {\n  // Default: fill width, no height\n  var placeholder = createPlaceholder(width || 1, height || 0);\n\n  // Only set placeholder if it's different\n  if (nativeGetAttribute.call(img, 'src') !== placeholder) {\n    nativeSetAttribute.call(img, 'src', placeholder);\n  }\n}\nfunction onImageReady(img, callback) {\n  // naturalWidth is only available when the image headers are loaded,\n  // this loop will poll it every 100ms.\n  if (img.naturalWidth) {\n    callback(img);\n  } else {\n    setTimeout(onImageReady, 100, img, callback);\n  }\n}\nfunction fixOne(el) {\n  var style = getStyle(el);\n  var ofi = el[OFI];\n  style['object-fit'] = style['object-fit'] || 'fill'; // default value\n\n  // Avoid running where unnecessary, unless OFI had already done its deed\n  if (!ofi.img) {\n    // fill is the default behavior so no action is necessary\n    if (style['object-fit'] === 'fill') {\n      return;\n    }\n\n    // Where object-fit is supported and object-position isn't (Safari < 10)\n    if (!ofi.skipTest &&\n    // unless user wants to apply regardless of browser support\n    supportsObjectFit &&\n    // if browser already supports object-fit\n    !style['object-position'] // unless object-position is used\n    ) {\n      return;\n    }\n  }\n\n  // keep a clone in memory while resetting the original to a blank\n  if (!ofi.img) {\n    ofi.img = new Image(el.width, el.height);\n    ofi.img.srcset = nativeGetAttribute.call(el, \"data-ofi-srcset\") || el.srcset;\n    ofi.img.src = nativeGetAttribute.call(el, \"data-ofi-src\") || el.src;\n\n    // preserve for any future cloneNode calls\n    // https://github.com/bfred-it/object-fit-images/issues/53\n    nativeSetAttribute.call(el, \"data-ofi-src\", el.src);\n    if (el.srcset) {\n      nativeSetAttribute.call(el, \"data-ofi-srcset\", el.srcset);\n    }\n    setPlaceholder(el, el.naturalWidth || el.width, el.naturalHeight || el.height);\n\n    // remove srcset because it overrides src\n    if (el.srcset) {\n      el.srcset = '';\n    }\n    try {\n      keepSrcUsable(el);\n    } catch (err) {\n      if (window.console) {\n        console.warn('https://bit.ly/ofi-old-browser');\n      }\n    }\n  }\n  polyfillCurrentSrc(ofi.img);\n  el.style.backgroundImage = \"url(\\\"\" + (ofi.img.currentSrc || ofi.img.src).replace(/\"/g, '\\\\\"') + \"\\\")\";\n  el.style.backgroundPosition = style['object-position'] || 'center';\n  el.style.backgroundRepeat = 'no-repeat';\n  el.style.backgroundOrigin = 'content-box';\n  if (/scale-down/.test(style['object-fit'])) {\n    onImageReady(ofi.img, function () {\n      if (ofi.img.naturalWidth > el.width || ofi.img.naturalHeight > el.height) {\n        el.style.backgroundSize = 'contain';\n      } else {\n        el.style.backgroundSize = 'auto';\n      }\n    });\n  } else {\n    el.style.backgroundSize = style['object-fit'].replace('none', 'auto').replace('fill', '100% 100%');\n  }\n  onImageReady(ofi.img, function (img) {\n    setPlaceholder(el, img.naturalWidth, img.naturalHeight);\n  });\n}\nfunction keepSrcUsable(el) {\n  var descriptors = {\n    get: function get(prop) {\n      return el[OFI].img[prop ? prop : 'src'];\n    },\n    set: function set(value, prop) {\n      el[OFI].img[prop ? prop : 'src'] = value;\n      nativeSetAttribute.call(el, \"data-ofi-\" + prop, value); // preserve for any future cloneNode\n      fixOne(el);\n      return value;\n    }\n  };\n  Object.defineProperty(el, 'src', descriptors);\n  Object.defineProperty(el, 'currentSrc', {\n    get: function () {\n      return descriptors.get('currentSrc');\n    }\n  });\n  Object.defineProperty(el, 'srcset', {\n    get: function () {\n      return descriptors.get('srcset');\n    },\n    set: function (ss) {\n      return descriptors.set(ss, 'srcset');\n    }\n  });\n}\nfunction hijackAttributes() {\n  function getOfiImageMaybe(el, name) {\n    return el[OFI] && el[OFI].img && (name === 'src' || name === 'srcset') ? el[OFI].img : el;\n  }\n  if (!supportsObjectPosition) {\n    HTMLImageElement.prototype.getAttribute = function (name) {\n      return nativeGetAttribute.call(getOfiImageMaybe(this, name), name);\n    };\n    HTMLImageElement.prototype.setAttribute = function (name, value) {\n      return nativeSetAttribute.call(getOfiImageMaybe(this, name), name, String(value));\n    };\n  }\n}\nfunction fix(imgs, opts) {\n  var startAutoMode = !autoModeEnabled && !imgs;\n  opts = opts || {};\n  imgs = imgs || 'img';\n  if (supportsObjectPosition && !opts.skipTest || !supportsOFI) {\n    return false;\n  }\n\n  // use imgs as a selector or just select all images\n  if (imgs === 'img') {\n    imgs = document.getElementsByTagName('img');\n  } else if (typeof imgs === 'string') {\n    imgs = document.querySelectorAll(imgs);\n  } else if (!('length' in imgs)) {\n    imgs = [imgs];\n  }\n\n  // apply fix to all\n  for (var i = 0; i < imgs.length; i++) {\n    imgs[i][OFI] = imgs[i][OFI] || {\n      skipTest: opts.skipTest\n    };\n    fixOne(imgs[i]);\n  }\n  if (startAutoMode) {\n    document.body.addEventListener('load', function (e) {\n      if (e.target.tagName === 'IMG') {\n        fix(e.target, {\n          skipTest: opts.skipTest\n        });\n      }\n    }, true);\n    autoModeEnabled = true;\n    imgs = 'img'; // reset to a generic selector for watchMQ\n  }\n\n  // if requested, watch media queries for object-fit change\n  if (opts.watchMQ) {\n    window.addEventListener('resize', fix.bind(null, imgs, {\n      skipTest: opts.skipTest\n    }));\n  }\n}\nfix.supportsObjectFit = supportsObjectFit;\nfix.supportsObjectPosition = supportsObjectPosition;\nhijackAttributes();\nmodule.exports = fix;"],"sourceRoot":""}